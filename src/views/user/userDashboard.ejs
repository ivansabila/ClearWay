<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../partials/head.ejs") %>
</head>

<body class="bg-slate-100">
    <div class="flex flex-col justify-between mainContainer bg-slate-100">
        <%- include("../partials/navbar.ejs") %>
            <div class="flex">
                <%- include("../partials/sidebar.ejs") %>
                    <div class="flex flex-col ml-72 flex-auto p-8 gap-10">
                        <div class="flex justify-between">

                            <div class="flex flex-col">
                                <h1 class="text-3xl font-semibold text-left titleSidebar font-base text-brown">
                                    Izin Pengajuan</h1>
                                <div class="flex flex-row items-center gap-1">
                                    <% if (user.nik==null) { %>
                                        <p class="text-sm font-medium font-base text-brown/60">Pengajuan belum dapat
                                            dilakukan, lengkapi</p>
                                        <a class="group w-fit border border-slate-300 px-2 py-1 flex flex-row gap-1 cursor-pointer items-center hover:bg-white"
                                            href="/profile/<%= user.id %>">
                                            <svg class="group-hover:stroke-maroon" xmlns="http://www.w3.org/2000/svg"
                                                width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#999999"
                                                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide
                                            lucide-user-pen">
                                                <path d="M11.5 15H7a4 4 0 0 0-4 4v2" />
                                                <path
                                                    d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z" />
                                                <circle cx="10" cy="7" r="4" />
                                            </svg>
                                            <p
                                                class="text-sm font-medium font-base text-brown/60 group-hover:text-brown">
                                                profil</p>
                                        </a>
                                        <p class="text-sm font-medium font-base text-brown/60">terlebih dahulu</p>
                                        <% } else { %>
                                            <p class="text-sm font-medium font-base text-brown/60">Anda bertanggung
                                                jawab
                                                sepenuhnya terhadap seluruh izin pengajuan yang anda ajukan</p>
                                            <% } %>
                                </div>
                            </div>
                            <% if (data.length> 0) { %>
                                <a class="group w-fit border border-slate-300 px-4 py-2 mt-4 flex flex-row gap-2 cursor-pointer items-center hover:bg-maroon"
                                    href="/book/<%= user.id %>">
                                    <svg class="stroke-maroon group-hover:stroke-white"
                                        xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                        fill="none" stroke="#999999" stroke-width="1.5" stroke-linecap="round"
                                        stroke-linejoin="round" class="lucide lucide-file-plus-2">
                                        <path d="M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4" />
                                        <path d="M14 2v4a2 2 0 0 0 2 2h4" />
                                        <path d="M3 15h6" />
                                        <path d="M6 12v6" />
                                    </svg>
                                    <p class="text-sm font-medium font-base text-brown group-hover:text-white">
                                        Buat Izin Pengajuan</p>
                                </a>
                                <% } %>

                        </div>
                        <div class="grid grid-cols-3 gap-4 bg-slate-200/50 p-6 min-h-96">
                            <% if (user.nik==null) { %>
                                <div class="row-span-3 col-span-4 h-96 flex justify-center items-center">
                                    <div class="flex flex-col w-96">
                                        <h1 class="text-xl font-bold text-left titleSidebar font-base text-brown">
                                            Izin pengajuan belum dapat dilakukan</h1>
                                        <p class="text-sm font-medium font-base text-brown/60">Silahkan lengkapi
                                            profil
                                            terlebih dahulu sebagai syarat mengajukan izin pengajuan</p>
                                        <a class="group w-fit border border-slate-300 px-4 py-2 mt-4 flex flex-row gap-2 cursor-pointer items-center hover:bg-white"
                                            href="/profile/<%= user.id %>">
                                            <svg class="group-hover:stroke-maroon" xmlns="http://www.w3.org/2000/svg"
                                                width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#999999"
                                                stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                                                class="lucide lucide-user-pen">
                                                <path d="M11.5 15H7a4 4 0 0 0-4 4v2" />
                                                <path
                                                    d="M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z" />
                                                <circle cx="10" cy="7" r="4" />
                                            </svg>
                                            <p
                                                class="text-sm font-medium font-base text-brown/60 group-hover:text-brown">
                                                Lengkapi Profil</p>
                                        </a>
                                    </div>
                                </div>
                                <% } else { %>
                                    <% if (data.length> 0) { %>
                                        <% data.forEach(item=> { %>
                                            <div
                                                class="h-fit border border-slate-300 bg-slate-100 flex flex-col p-4 gap-3">
                                                <div class="flex flex-col">
                                                    <h1
                                                        class="text-2xl font-bold text-left titleSidebar font-base text-brown line-clamp-1">
                                                        <%= item.title %>
                                                    </h1>
                                                    <p class="text-sm font-medium font-base text-brown/60 line-clamp-1">
                                                        <%= item.event %>
                                                    </p>
                                                    <p
                                                        class="w-fit px-2 py-1 mt-4 text-xs font-medium font-base text-white flex flex-row <% if (item.status == 'Menunggu') { %> bg-blue-500 <% } else if (item.status == 'Ditolak') { %> bg-red-500 <% } else if (item.status == 'Kelurahan') { %> bg-yellow-500 <% } else if (item.status=='Dishub' ) { %> bg-orange <% } %>">
                                                        <%= item.status %>
                                                    </p>
                                                </div>
                                                <div class="flex flex-col divide-y divide-slate-300">
                                                    <div class="flex flex-row justify-between py-[2px]">
                                                        <h1 class="text-sm font-bold font-base text-navy">Jumlah peserta
                                                        </h1>
                                                        <p
                                                            class="text-sm font-medium font-base text-navy/60 line-clamp-1 w-2/3 text-right">
                                                            Â±<%= item.participant %>
                                                                orang
                                                        </p>
                                                    </div>
                                                    <div class="flex flex-row justify-between py-[2px]">
                                                        <h1 class="text-sm font-bold font-base text-navy">Lokasi</h1>
                                                        <p
                                                            class="text-sm font-medium font-base text-navy/60 line-clamp-1 w-2/3 text-right">
                                                            <%= item.location %>
                                                        </p>
                                                    </div>
                                                    <div class="flex flex-row justify-between py-[2px]">
                                                        <h1 class="text-sm font-bold font-base text-navy">Tanggal</h1>
                                                        <p
                                                            class="text-sm font-medium font-base text-navy/60 line-clamp-1 w-2/3 text-right">
                                                            <%= item.date %>
                                                        </p>
                                                    </div>
                                                    <div class="flex flex-row justify-between py-[2px]">
                                                        <h1 class="text-sm font-bold font-base text-navy">Pukul</h1>
                                                        <p
                                                            class="text-sm font-medium font-base text-navy/60 line-clamp-1 w-2/3 text-right">
                                                            <%= item.starttime %> - <%= item.endtime %> WITA
                                                        </p>
                                                    </div>
                                                </div>
                                                <a class="w-fit px-4 py-1 text-sm font-medium font-base text-brown border border-slate-300 flex flex-row cursor-pointer items-center hover:bg-maroon hover:text-white"
                                                    href="/book/<%= user.id %>/detail/<%= item.id %>">Lihat
                                                    selengkapnya</a>
                                            </div>
                                            <% }) %>
                                                <% } else { %>
                                                    <div
                                                        class="row-span-3 col-span-4 h-96 flex justify-center items-center">
                                                        <div class="flex flex-col w-96">
                                                            <h1
                                                                class="text-xl font-bold text-left titleSidebar font-base text-brown">
                                                                Anda tidak memiliki izin pengajuan</h1>
                                                            <p class="text-sm font-medium font-base text-brown/60">
                                                                Silahkan
                                                                ajukan
                                                                izin
                                                                pengajuan kegiatan anda yang menggunakan pemakaian,
                                                                pengamanan
                                                                atau
                                                                pengalihan jalan disini</p>
                                                            <a class="group w-fit border border-slate-300 px-4 py-2 mt-4 flex flex-row gap-2 cursor-pointer items-center hover:bg-white"
                                                                href="/book/<%= user.id %>">
                                                                <svg class="group-hover:stroke-maroon"
                                                                    xmlns="http://www.w3.org/2000/svg" width="18"
                                                                    height="18" viewBox="0 0 24 24" fill="none"
                                                                    stroke="#999999" stroke-width="1.5"
                                                                    stroke-linecap="round" stroke-linejoin="round"
                                                                    class="lucide lucide-file-plus-2">
                                                                    <path
                                                                        d="M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4" />
                                                                    <path d="M14 2v4a2 2 0 0 0 2 2h4" />
                                                                    <path d="M3 15h6" />
                                                                    <path d="M6 12v6" />
                                                                </svg>
                                                                <p
                                                                    class="text-sm font-medium font-base text-brown/60 group-hover:text-brown">
                                                                    Buat Izin Pengajuan</p>
                                                            </a>
                                                        </div>
                                                    </div>


                                                    <% } %>
                                                        <% } %>
                        </div>
                        <div id="toast"
                            class="hidden fixed border border-slate-300 p-4 -bottom-20 right-0 w-full bg-green-500 text-base text-center font-base text-white transition-all duration-500">
                            <%= message %>
                        </div>
                    </div>
            </div>
    </div>
    <script>
        const toastMessage = "<%= message %>"
    </script>
    <script src="/js/toast.js"></script>

</body>

</html>